{"version":3,"sources":["components/Processing/geoProcessSelect.js","components/Processing/intersectProcess.js","components/Processing/Snackbar.js","components/Processing/ProcessForm.js","components/Processing/unionProcess.js","components/Processing/bufferProcess.js","components/Processing/simplifyProcess.js","components/Processing/clipProcess.js","components/Processing/differenceProcess.js","components/Generation/CreateLayerMenu.js","components/Toolbar/Toolbar.js","components/LayerList/LayerListElement.js","components/LayerList/changeDisplay.js","components/CustomContext/ContextMenu.js","components/LayerList/LayerList.js","components/Backdrop/Backdrop.js","Map/index.js","components/DragAndDrop.js","components/DropZone.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","button","display","marginTop","spacing","formControl","margin","minWidth","ControlledOpenSelect","initialParam","type","layers","tools","setParentValue","classes","React","useState","value","setValue","open","setOpen","autoComplete","FormControl","className","InputLabel","htmlFor","Select","onClose","onOpen","onChange","event","target","inputProps","name","MenuItem","map","item","index","alert","layer","_leaflet_id","createIntersect","input","toggleSnack","features1","features2","pieces","eachLayer","feature","geometry","push","coordinates","c","turf","forEach","poly","intersections","f1","f2","conflict","variantIcon","success","CheckCircleIcon","warning","WarningIcon","error","ErrorIcon","info","InfoIcon","useStyles1","backgroundColor","green","palette","dark","primary","main","amber","icon","fontSize","iconVariant","opacity","marginRight","message","alignItems","MySnackbarContentWrapper","props","variant","other","Icon","SnackbarContent","clsx","aria-describedby","id","action","IconButton","key","aria-label","color","onClick","SimpleSnackbar","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","this","toggleSnackbar","msgType","msg","Component","floodColor","ProcessForm","handleClickOpen","setState","String","snackbar","snackbarMsg","snackbarType","handleClose","setTool","selectedToolIndex","setParam","param","state","param1","param2","setParam2","setNumberParam","numberParameter","displaySnackbar","doProcess","tool","json1","json2","dist","file","features","union","createUnion","collection","buffered","units","createBuffer","tol","options","tolerance","highQuality","createSimplify","mask","inputType","inputCollection","clipMask","fail","intersectProcess","splits","line","lineSegment","linePoint","lineCoordinates","length","createClip","diff","difference","candidate","anyLuck","diffPoly","d","intersection","createDifference","handleNewFile","parameters","selector","numberParameterText","DialogContentText","style","typeText","Input","placeholder","Button","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogActions","CreateLayerMenu","handleClick","handleOpen","e","text","toggleCreateMode","handleSelect","toolbar","createLayerMode","root","width","height","maxWidth","background","paper","DisplayDialog","newColor","changeColor","changeName","handleNameChange","subFields","i","subTexts","TextField","autoFocus","fullWidth","paddingTop","marginLeft","undefined","hex","setStyle","weight","dashArray","fillOpacity","fillColor","getItemStyle","isDragging","draggableStyle","borderRadius","LayerList","onZoomToLayer","changeDisplay","items","selectedIndex","displayDialog","disableDrag","onDragEnd","bind","prevProps","result","destination","list","startIndex","endIndex","Array","from","splice","removed","reorder","source","orderLayers","visibility","visibilityOff","droppableId","provided","snapshot","RootRef","rootRef","innerRef","Paper","maxHeight","overflow","List","_","isDraggingOver","border","draggableId","ListItem","selected","handleListItemClick","onContextMenu","rightClick","ContainerComponent","ContainerProps","ref","draggableProps","dragHandleProps","console","log","ListItemText","ListItemIcon","toggleVisibility","onDelete","zIndex","heading","ListItemSecondaryAction","backdrop","click","Wrapper","styled","div","Map","createdLayer","componentDidMount","L","center","zoom","zoomControl","tileLayer","detectRetina","maxZoom","maxNativeZoom","on","addLayer","clickCreateLayer","componentDidUpdate","clickedPoints","removeLayer","latlng","reverse","createLayer","newLayer","polyline","addTo","polygon","resetFile","deletedLayer","hide","unhide","zoomTo","fitBounds","getBounds","resetZoom","zoomToFeature","onEachFeature","hideLayer","geojsonData","geoj","geoJSON","pointToLayer","circleMarker","radius","Math","floor","random","toString","setZIndex","bindPopup","MyDropzone","onDrop","useCallback","acceptedFiles","reader","FileReader","onabort","onerror","onload","binaryStr","jsonLayer","JSON","parse","readAsBinaryString","useDropzone","getRootProps","getInputProps","isDragActive","position","textAlign","boxShadow","App","sideDrawerOpen","deletedLayers","drawerToggleClickHandler","prevState","openGeoProcess","backdropClickHandler","handleDelete","itemId","layerToDelete","filter","l","existingLayer","find","_layers","_svgSize","lat","lng","resetHighlight","zoomToLayer","highlightFeature","selectLayer","newLayers","drawerClickHandler","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e128f77d.chunk.js","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    display: 'block',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\n//params:\r\n// type: The type of selector\r\n// layers: the layers we have at disposal\r\n// tools: the tools we have at disposal.\r\n// typeText: The text associated with the type of selector\r\nexport default function ControlledOpenSelect({initialParam, type, layers, tools, setParentValue}) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(initialParam);\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  \r\n  const handleChange = event => {\r\n    setValue(event.target.value);\r\n    setParentValue(event.target.value)\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form autoComplete=\"off\">\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel htmlFor=\"selector\">{type}</InputLabel>\r\n          <Select\r\n            open={open}\r\n            onClose={handleClose}\r\n            onOpen={handleOpen}\r\n            value={value}\r\n            onChange={handleChange}\r\n            inputProps={{\r\n              name: 'value',\r\n            }}\r\n          >\r\n            <MenuItem value=\"-1\">\r\n              <em>None</em>\r\n            </MenuItem>\r\n\r\n            {type == 'tools'? tools? tools.map((item, index) => (\r\n                <MenuItem value={index}>\r\n                  <em>{item}</em>\r\n                </MenuItem>\r\n            ))\r\n            : alert(\"Something went horribly wrong\")\r\n            : layers? layers.map((item, index) => (\r\n                <MenuItem value={index}>\r\n                  <em>{item.layer.name? item.layer.name: item.layer._leaflet_id}</em>\r\n                </MenuItem>\r\n            )) \r\n            : alert(\"No \" + {layers} + \r\n            \" to process... Add a layer by dragging it into the left column.\")}\r\n\r\n          </Select>\r\n        </FormControl>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import * as turf from '@turf/turf';\r\nimport L from 'leaflet';\r\n\r\n\r\nexport default function createIntersect(input, toggleSnack) {\r\n\r\n    //Extract all single features. Must be polygons TODO: add a question if it is polygon or not:\r\n    var features1 = []\r\n    var features2 = []\r\n\r\n    try {\r\n    var pieces = []\r\n    input[0].layer.eachLayer(layer => {    \r\n        //Puts a minimal buffer around the feature to make a polygon of it. \r\n        //Turf requires polygons for the intersection operator.\r\n        if ((layer.feature.geometry.type == \"Polygon\")) {\r\n            features1.push(layer.feature)\r\n        } else if (layer.feature.geometry.type == \"MultiPolygon\") {\r\n            //split up multipolygon and add it to a a feature list.\r\n            pieces.push(layer.feature.geometry.coordinates.map(c => turf.polygon(c)))\r\n\r\n        } else {\r\n            toggleSnack(\"...Invalid geometry-types!\", \"error\")\r\n            return null\r\n        }\r\n    });\r\n    pieces.forEach((poly) => {\r\n        features1.push(poly[0])\r\n    })\r\n    pieces = []\r\n\r\n    input[1].layer.eachLayer(layer => {    \r\n        //Puts a minimal buffer around the feature to make a polygon of it. \r\n        //Turf requires polygons for the intersection operator.\r\n        if ((layer.feature.geometry.type == \"Polygon\") || (layer.feature.geometry.type == \"MultiPolygon\")) {\r\n            features2.push(layer.feature)\r\n        } else if (layer.feature.geometry.type == \"MultiPolygon\") {\r\n            //split up multipolygon and add it to a a feature list.\r\n            pieces.push(layer.feature.geometry.coordinates.map(c => turf.polygon(c)))\r\n\r\n        } else {\r\n            toggleSnack(\"...Invalid geometry-types!\", \"error\")\r\n            return null\r\n        }\r\n    });\r\n    pieces.forEach((poly) => {\r\n        features2.push(poly[0])\r\n    })\r\n    \r\n    } catch {\r\n        toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n    }\r\n\r\n    //For all features, find the intersection with all features. Computationnally extremely costly.\r\n    var intersections = []  \r\n        try {\r\n            features1.forEach(f1 => {\r\n                features2.forEach(f2 => {\r\n                    var conflict = null;\r\n                    // try {\r\n                    //     conflict = turf.intersect(f1,f2);\r\n                    // } catch {\r\n                        try {\r\n                            conflict = turf.difference(f1, f2)\r\n                            if(conflict == null) {\r\n\r\n                                conflict = f1\r\n\r\n                            } else {\r\n                                conflict = turf.difference(f1, conflict)\r\n                            }\r\n                        } catch {\r\n                        }\r\n                    // }\r\n                    if (conflict !== null) {\r\n                        intersections.push(conflict);\r\n                    }   \r\n                })\r\n            })\r\n        } catch {\r\n            toggleSnack(\"Could not generate the intersection. Contact your highest superior\", \"error\")\r\n            return null\r\n        }\r\n    // }\r\n    \r\n\r\n\r\n\r\n    let name = \"new_\"\r\n    if (input[0].layer.name) {\r\n        name = input[0].layer.name\r\n    }\r\n\r\n    var intersect = {\r\n        \"type\": \"FeatureCollection\",\r\n        \"name\": name + \" intersection\",\r\n        \"features\": intersections,\r\n    } \r\n\r\n    return intersect\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst useStyles1 = makeStyles(theme => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.main,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n}));\r\n\r\nfunction MySnackbarContentWrapper(props) {\r\n  const classes = useStyles1();\r\n  const { className, message, onClose, variant, ...other } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={clsx(classes[variant], className)}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n      }\r\n      action={[\r\n        <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nMySnackbarContentWrapper.propTypes = {\r\n  className: PropTypes.string,\r\n  message: PropTypes.string,\r\n  onClose: PropTypes.func,\r\n  variant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired,\r\n};\r\n\r\nexport default class SimpleSnackbar extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  render() {\r\n  return (\r\n\r\n  <div>\r\n    <Snackbar \r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n      autoHideDuration={8000}\r\n      open={this.props.open}\r\n      onClose={this.props.toggleSnackbar}\r\n    >\r\n\r\n    <MySnackbarContentWrapper\r\n      onClose={this.props.toggleSnackbar}\r\n      variant={this.props.msgType}\r\n      message={this.props.msg}\r\n    />\r\n    </Snackbar>\r\n  </div>\r\n  );}\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport ControlledOpenSelect from './geoProcessSelect'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport createBuffer from './bufferProcess';\r\nimport createUnion from './unionProcess';\r\nimport createIntersect from './intersectProcess';\r\nimport createSimplify from './simplifyProcess';\r\nimport createDifference from './differenceProcess';\r\nimport Input from '@material-ui/core/Input';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { create } from 'domain';\r\nimport { IconButton, Snackbar } from '@material-ui/core';\r\nimport SimpleSnackbar from './Snackbar'\r\nimport preProcess from \"./preProcess.js\";\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport createClip from './clipProcess';\r\n\r\n\r\n\r\nconst classes = makeStyles(theme => ({\r\n  button: {\r\n    display: 'block',\r\n    marginTop: theme.spacing(2),\r\n    color: 'white',\r\n    floodColor: 'black'\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  input: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\n\r\nexport default class ProcessForm extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        layers: this.props.layers,\r\n        selectedToolIndex: -1,\r\n        open: false,\r\n        tools: ['UNION', 'BUFFER', 'INTERSECT', 'SIMPLIFY', \"CLIP\", \"DIFFERENCE\"],\r\n        parameters: [],\r\n        param1: null,\r\n        param2: null,\r\n        numberParameter: 0.001,\r\n        snackbar: false,\r\n        snackbarMsg: \"\",\r\n        snackbarType: \"\",\r\n      };  \r\n    }\r\n\r\n  handleClickOpen = () => {\r\n    this.setState({\r\n      open: true\r\n    });    \r\n  };\r\n\r\n  toggleSnackbar = (msg, type) => {\r\n    if ((typeof msg === 'string' || msg instanceof String) && (typeof type === 'string' || type instanceof String)) {\r\n\r\n      this.setState({\r\n        snackbar: true,\r\n        snackbarMsg: msg,\r\n        snackbarType: type,\r\n      })\r\n    } else if (type !== \"clickaway\") {\r\n      //Hmmm....\r\n      this.setState({\r\n        snackbar: false,\r\n        snackbarMsg: \"\",\r\n        snackbarType: \"\",\r\n      })\r\n    }\r\n  }\r\n\r\n  handleClose = () => {\r\n    \r\n    this.setState({\r\n      open: false\r\n    });    \r\n  };\r\n\r\n\r\n  setTool = (value) => {\r\n    this.setState({\r\n      selectedToolIndex: value,\r\n    });        \r\n  }\r\n\r\n  setParam = (param) => {\r\n    if (this.state.param1 == param) {\r\n      return \r\n    } else if (this.state.param2 == param) {\r\n      this.toggleSnackbar(\"You must choose two differen't layers\", \"warning\")\r\n    }\r\n    this.setState({\r\n      param1: param\r\n    })\r\n  }\r\n\r\n  setParam2 = (param) => {\r\n    if (this.state.param2 == param) {\r\n      \r\n      return \r\n    } else if (this.state.param1 == param) {\r\n      this.toggleSnackbar(\"You must choose two differen't layers\", \"warning\")\r\n    }\r\n    this.setState({\r\n      param2: param\r\n    })\r\n  }\r\n\r\n  setNumberParam = (param) => {\r\n    this.setState({\r\n      numberParameter: param.target.value,\r\n    })\r\n    \r\n  }\r\n\r\n  displaySnackbar = () => {\r\n    let snackbar = ( \r\n      <SimpleSnackbar\r\n        open={this.state.snackbar}\r\n        toggleSnackbar={this.toggleSnackbar}\r\n        msgType={this.state.snackbarType ? this.state.snackbarType: \"success\"}//success, warning, error, info\r\n        msg={this.state.snackbarMsg ? this.state.snackbarMsg: \"hello\"}//Input: string of mesage\r\n      />)      \r\n\r\n    return snackbar\r\n  }\r\n\r\n  doProcess = () => {\r\n    let tool = this.state.tools[this.state.selectedToolIndex]\r\n    let json1 = this.props.layers[this.state.param1]\r\n    let json2 = this.props.layers[this.state.param2]\r\n    let dist = this.state.numberParameter\r\n    let file = null;\r\n\r\n    switch(tool) {\r\n      case \"UNION\":\r\n        file = createUnion([json1, json2], dist, this.toggleSnackbar)\r\n        break;\r\n\r\n      case \"BUFFER\":\r\n        file = createBuffer(json1, dist, this.toggleSnackbar)\r\n        break;\r\n\r\n      case \"INTERSECT\":\r\n        file = createIntersect([json1, json2], this.toggleSnackbar)\r\n        break;\r\n\r\n      case \"SIMPLIFY\":\r\n        file = createSimplify(json1, dist, this.toggleSnackbar)\r\n        break;\r\n        \r\n      case \"CLIP\":\r\n        file = createClip(json1, json2, this.toggleSnackbar)\r\n      break;\r\n\r\n      case \"DIFFERENCE\":\r\n        file = createDifference([json1, json2], this.toggleSnackbar)\r\n      break;\r\n\r\n    }\r\n    if (file != null) {\r\n      this.props.handleNewFile(file);\r\n      this.toggleSnackbar(\"...Success!\", \"success\")\r\n    }\r\n\r\n    this.setState({\r\n      open: false,\r\n      param1: null,\r\n      param2: null,\r\n      numberParameter: 0.001,\r\n    });    \r\n  }\r\n  \r\n  render() {\r\n\r\n    let selector;\r\n    let numberParameter;\r\n    let numberParameterText;\r\n\r\n    switch(this.state.selectedToolIndex) {\r\n      case -1: //Not a single tool selected.\r\n        break;\r\n      \r\n        case 0: //Union\r\n        selector = \r\n          <div>\r\n            <DialogContentText>\r\n              {'Choose the layers you want to find the union of.'} \r\n            </DialogContentText>\r\n\r\n            <div style={{display: \"flex\"}}>\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'1st Input layer'} \r\n            />\r\n\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam2}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'2nd Input layer'} \r\n            />\r\n            </div>\r\n        </div>\r\n        break;\r\n\r\n      case 1: //BUFFER\r\n        selector = <ControlledOpenSelect \r\n          setParentValue={this.setParam}\r\n          initialParam={-1} \r\n          tools={this.state.tools} \r\n          layers={this.props.layers} \r\n          type={'Input'} \r\n          typeText={'Choose the layer you want to make a buffer around.'} \r\n        />\r\n        numberParameter = <Input\r\n          onChange={this.setNumberParam}\r\n          placeholder=\"Buffer distance (km)\"\r\n          inputProps={{\r\n            'aria-label': 'description',\r\n          }}\r\n        />\r\n        numberParameterText = <DialogContentText>\r\n          {\"Insert the buffer distance. In kilometres\"}\r\n        </DialogContentText>\r\n        break;\r\n      \r\n      case 2: //Intersect \r\n        selector = \r\n          <div>\r\n            <DialogContentText>\r\n              {'Choose the layers you want to find the intersection of.'} \r\n            </DialogContentText>\r\n\r\n            <div style={{display: \"flex\"}}>\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'1st Input layer'} \r\n            />\r\n\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam2}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'2nd Input layer'} \r\n            />\r\n            </div>\r\n        </div>\r\n        break;\r\n\r\n      case 3: //Simplify \r\n        selector = \r\n          <div>\r\n            <DialogContentText>\r\n              {'Choose the layer you want to simplify.'} \r\n            </DialogContentText>\r\n\r\n            <div style={{display: \"flex\"}}>\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'Input layer'} \r\n            />\r\n            </div>\r\n        </div>\r\n\r\n        numberParameter = \r\n          <Input\r\n            onChange={this.setNumberParam}\r\n            placeholder=\"Default 0.001\"\r\n            inputProps={{\r\n              'aria-label': 'description',\r\n            }}\r\n          />\r\n\r\n      numberParameterText = \r\n        <DialogContentText>\r\n          {\"Insert tolerance factor. Must be higher than 0.\"}\r\n        </DialogContentText>\r\n      break;\r\n\r\n      case 4: //CLIP \r\n        selector = \r\n          <div>\r\n            <DialogContentText>\r\n              {'Choose the layer you want to clip.'} \r\n            </DialogContentText>\r\n\r\n            <div style={{display: \"flex\"}}>\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'Input line-layer'} \r\n            />\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam2}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'clip on polygon:'} \r\n            />\r\n            </div>\r\n        </div>\r\n      break;\r\n\r\n      case 5: //DIFFERENCE\r\n        selector = \r\n          <div>\r\n            <DialogContentText>\r\n              {'Choose the layer and the layer you want to remove.'} \r\n            </DialogContentText>\r\n\r\n            <div style={{display: \"flex\"}}>\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'Input'} \r\n            />\r\n            <ControlledOpenSelect \r\n              setParentValue={this.setParam2}\r\n              initialParam={-1} \r\n              tools={this.state.tools} \r\n              layers={this.props.layers} \r\n              type={'Minus this layer:'} \r\n            />\r\n            </div>\r\n        </div>\r\n      break;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          className={classes.button}\r\n          onClick={this.handleClickOpen}\r\n        ><BuildIcon />Geoprocess</Button>\r\n        <Dialog open={this.state.open} onClose={this.handleClose} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">Processing Tools</DialogTitle>\r\n          <DialogContent>\r\n          <DialogContentText>\r\n            {'Choose the tool you want to use'}\r\n          </DialogContentText>\r\n            <ControlledOpenSelect \r\n            initialParam={this.state.selectedToolIndex}\r\n            setParentValue={this.setTool} \r\n            tools={this.state.tools} \r\n            type={'tools'} \r\n            />\r\n            {selector}\r\n            {numberParameterText}\r\n            {numberParameter}\r\n        </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleClose} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={this.doProcess} color=\"primary\">\r\n              Process\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        {this.state.snackbar ? this.displaySnackbar(): \"\"}\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}","import * as turf from '@turf/turf';\r\nimport L from 'leaflet';\r\n\r\n\r\nexport default function createUnion(input, toggleSnack) {\r\n    try {\r\n    //Extract all single features. Must be polygons\r\n    var features = []\r\n    input.forEach(param => {\r\n            param.layer.eachLayer(function (layer) {\r\n                features.push(layer.feature)\r\n            });\r\n        });\r\n    } catch {\r\n        toggleSnack(\"Inputs are not valid...\", \"error\")\r\n        return\r\n    }\r\n    \r\n    try {\r\n    //Do the operations on all polygons\r\n    var union = turf.union(...features)\r\n    union.name =  input[0].layer.name + \" + \" + input[1].layer.name\r\n    return union\r\n    } catch {\r\n        toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n        return null\r\n    }\r\n}\r\n","import * as turf from '@turf/turf';\r\nimport L from 'leaflet';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport React from 'react';\r\n\r\nexport default function createBuffer(input, dist, toggleSnack) {\r\n  \r\n\r\n\r\n  toggleSnack(\"Validating input...\", \"info\")\r\n  try {\r\n    var collection = {\r\n      \"type\": \"FeatureCollection\",\r\n      \"features\": [],\r\n    } \r\n\r\n    input.layer.eachLayer(function (layer) {\r\n      collection.features.push(layer.feature)\r\n    });\r\n    toggleSnack(\"Validation complete. Continuing with buffer-operation...\", \"info\")\r\n    \r\n  } catch {\r\n    toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n    return null\r\n  }\r\n\r\n  try {\r\n    var buffered = turf.buffer(\r\n      collection,\r\n      dist,\r\n      {units: \"kilometers\"},\r\n    )\r\n    buffered.name =  input.layer.name + \" \" + dist + \"km_buffer\"\r\n    return buffered;\r\n      \r\n  } catch {\r\n\r\n    toggleSnack(\"Could not generate the buffer. Contact your highest superior\", \"error\")\r\n    return null;\r\n  }\r\n}\r\n","import * as turf from '@turf/turf';\r\nimport L from 'leaflet';\r\n\r\n\r\nexport default function createSimplify(input, tol, toggleSnack) {\r\n\r\n  try {\r\n  //Creating a simple featurecollection in geojson,\r\n  //and populating by the features from the leaflet layers.\r\n  var collection = {\r\n    \"type\": \"FeatureCollection\",\r\n    \"name\": \"simplified\" + tol + input.layer.name,\r\n    \"features\": [],\r\n  } \r\n  input.layer.eachLayer(function (layer) {\r\n    collection.features.push(layer.feature)\r\n  });\r\n  } catch {\r\n    toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n  }\r\n\r\n  try {\r\n    var options = {tolerance: tol, highQuality: false};\r\n    var simplified = turf.simplify(\r\n      collection,\r\n      options\r\n    )\r\n    return simplified;\r\n    \r\n  } catch {\r\n    toggleSnack(\"Could not generate the simplified layer. Contact your highest superior\", \"error\")\r\n    return null;\r\n  }\r\n}\r\n","import * as turf from '@turf/turf';\r\nimport L from 'leaflet';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport React from 'react';\r\nimport { fail } from 'assert';\r\nimport intersectProcess from './intersectProcess'\r\n\r\nexport default function createClip(input, mask, toggleSnack) {\r\n  \r\n \r\n  toggleSnack(\"Validating input...\", \"info\")\r\n  try {\r\n    var inputCollection = {\r\n      \"type\": \"FeatureCollection\",\r\n      \"name\":  input.layer.name + \"_clipped\",\r\n      \"features\": [],\r\n    }\r\n\r\n    var inputType;\r\n    //parsing the input\r\n    input.layer.eachLayer(function (layer) {\r\n      inputType = layer.feature.geometry.type;\r\n      inputCollection.features.push(layer.feature)\r\n    });\r\n    //parsing the mask\r\n    var clipMask = null\r\n\r\n    mask.layer.eachLayer(function (layer) {\r\n      var inputType = layer.feature.geometry.type;\r\n      if ((inputType != \"Polygon\") && (inputType != \"MultiPolygon\")) {\r\n        fail();\r\n      }\r\n      clipMask = layer.feature\r\n    });\r\n\r\n\r\n\r\n    toggleSnack(\"Validation complete. Continuing with buffer-operation...\", \"info\")\r\n    \r\n  } catch {\r\n    toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n    return null\r\n  }\r\n\r\n  //Starting with the process.\r\n  if (inputType == \"Point\") {\r\n    return turf.pointsWithinPolygon(inputCollection, clipMask);\r\n  } else if ((inputType == \"Polygon\") || (inputType == \"MultiPolygon\")) {\r\n    return intersectProcess([input, mask], toggleSnack)\r\n  } else if (inputType == \"LineString\") {\r\n\r\n    var splits = []\r\n    //Split each line on intersections of a polygon\r\n    //Splitt hver linje nr den treffer et polygon:\r\n    inputCollection.features.forEach((line) => {\r\n\r\n      var split = turf.lineSplit(line, clipMask)\r\n\r\n      //For each of these linesegments check if they are inside the polygon:  \r\n      //For hvert linjesegment sjekk om den er innenfor eller utenfor polygonet ved bruk av punktene.\r\n      split.features.forEach((lineSegment) => {\r\n        var lineCoordinates = lineSegment.geometry.coordinates;\r\n        var linePoint;\r\n\r\n        //Hvis linjesegmentet er rett og kun definert av start og slutt, bruk midtpunkt av linjen\r\n        if (lineCoordinates.length == 2 ) {\r\n            linePoint = turf.center(lineSegment);         \r\n            //Hvis ikke; sjekk om det 2 punktet som definerer linjen er innenfor.              \r\n        } else {\r\n            linePoint = turf.point(lineCoordinates[1]);\r\n        }\r\n\r\n        //Hvis punktet er innenfor polygonet returnerer det en liste strre enn 0:\r\n        if(turf.pointsWithinPolygon(linePoint, clipMask).features.length > 0) {\r\n          //legger derfor til linjesegmentet som er innenfor polygonet.\r\n            splits.push(lineSegment)\r\n        }\r\n      })\r\n    })\r\n    inputCollection.features = splits\r\n    return inputCollection\r\n  }\r\n\r\n}","import * as turf from '@turf/turf';\r\nimport createIntersect from './intersectProcess'\r\nimport L from 'leaflet';\r\n\r\n\r\nexport default function createDifference(input, toggleSnack) {\r\n    try {\r\n\r\n        var main = []\r\n        var diff = []\r\n\r\n        input[0].layer.eachLayer(function (layer) {\r\n            if (layer.feature.geometry.type == \"MultiPolygon\") {\r\n                main.push(layer.feature.geometry.coordinates.map(c => turf.polygon(c)))\r\n            } \r\n            main.push(layer.feature)\r\n        });\r\n        input[1].layer.eachLayer(function (layer) {\r\n            if (layer.feature.geometry.type == \"MultiPolygon\") {\r\n                diff.push(layer.feature.geometry.coordinates.map(c => turf.polygon(c)))\r\n            } \r\n            diff.push(layer.feature)\r\n        });\r\n        \r\n    } catch {\r\n        toggleSnack(\"Inputs are not valid...\", \"error\")\r\n        return\r\n    }\r\n    \r\n    try {\r\n    //Do the operations on all polygons\r\n\r\n    var difference = {\r\n        \"type\": \"FeatureCollection\",\r\n        \"name\": input[0].layer.name + \"_diff_\" + input[1].layer.name,\r\n        \"features\": [],\r\n      }\r\n\r\n\r\n    main.forEach(poly => {\r\n\r\n        var candidate = poly\r\n        var anyLuck = false;\r\n\r\n        diff.forEach(diffPoly => {\r\n            var d = turf.difference(poly, diffPoly)\r\n            if (d != null) {\r\n                var intersection = turf.intersect(d, candidate);\r\n                //if intersection led to results:\r\n                if (intersection != null) {\r\n                    candidate = intersection\r\n                    anyLuck = true;\r\n                }\r\n            }\r\n        })\r\n        if (anyLuck) {\r\n            difference.features.push(candidate)\r\n        }\r\n    })\r\n    \r\n    \r\n    \r\n\r\n\r\n    toggleSnack(\"erased \" + input[1].layer.name + \" from \" + input[0].layer.name, \"success\")\r\n    return difference\r\n    } catch {\r\n        toggleSnack(\"something went wrong while loading the layers. Check your inputs before trying again...\", \"error\")\r\n        return null\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Input from '@material-ui/core/Input';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\n\r\nimport { create } from 'domain';\r\nimport { IconButton, Snackbar } from '@material-ui/core';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\n\r\n\r\nconst classes = makeStyles(theme => ({\r\n  button: {\r\n    display: 'block',\r\n    marginTop: theme.spacing(2),\r\n    color: 'white',\r\n    floodColor: 'black'\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  input: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\n\r\nexport default class CreateLayerMenu extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        open: false,\r\n        icon: <AddIcon>kjasdf</AddIcon>,\r\n        text: \"create new layer\",\r\n        color: \"primary\",\r\n        type: \"Polygon\",\r\n        // snackbarMsg: \"\",\r\n        // snackbarType: \"\",\r\n      };  \r\n    }\r\n\r\n  handleClick = () => {\r\n    if (this.state.open) {\r\n      this.handleClose()\r\n    } else {\r\n      this.handleOpen()\r\n    }\r\n  }\r\n\r\n  handleOpen = (e = \"Polygon\") => {\r\n    this.setState({\r\n      open: true,\r\n      icon: <SaveIcon />,\r\n      text: \"Save layer\",\r\n      color: \"default\",\r\n    });    \r\n    this.props.toggleCreateMode(e)\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      open: false,\r\n      icon: <AddIcon />,\r\n      text: \"create new layer\",\r\n      color: \"primary\",\r\n    });   \r\n    this.props.toggleCreateMode(false)\r\n  };\r\n\r\n  handleSelect = event => {\r\n    this.props.toggleCreateMode(event.target.value)\r\n    this.setState({\r\n      type: event.target.value\r\n    });  \r\n  };\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div style={{spacing: 50}}>\r\n        {this.state.open ? \r\n          <Select\r\n            value={this.state.type}\r\n            onChange={this.handleSelect}\r\n          >\r\n            <MenuItem value={\"LineString\"}>LineString</MenuItem>\r\n            <MenuItem value={\"Polygon\"}>Polygon</MenuItem>\r\n            {/* <MenuItem value={\"B\"}>BBox</MenuItem> */}\r\n\r\n          </Select>\r\n          : \"\"}\r\n{/*           \r\n        {this.state.open ? \r\n          <Button\r\n            variant=\"contained\"\r\n            color={this.state.color}\r\n            className={classes.button}\r\n            onClick={this.handleClose(\"quit\")}\r\n          >\r\n            <CloseIcon />\r\n          </Button>: \"\"} */}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color={this.state.color}\r\n          className={classes.button}\r\n          onClick={this.handleClick}\r\n        >\r\n          {this.state.icon}{this.state.text}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport ProcessForm from '../Processing/ProcessForm'\r\nimport DrawerToggleButton from '../SideDrawer/DrawerToggleButton';\r\nimport CreateLayerMenu from '../Generation/CreateLayerMenu.js';\r\nimport './Toolbar.css';\r\n\r\nconst toolbar = props => (\r\n  <header className=\"toolbar\">\r\n    <nav className=\"toolbar__navigation\">\r\n        {/* <div className=\"toolbar__toggle-button\">\r\n            <DrawerToggleButton click={props.drawerClickHandler} />\r\n        </div> */}\r\n        <div className=\"spacer\" />\r\n        <div className=\"toolbar_navigation-items\">\r\n          <CreateLayerMenu \r\n            createLayerMode={props.createLayerMode}\r\n            toggleCreateMode={props.toggleCreateMode}\r\n          />\r\n        </div>\r\n        <div className=\"minispacer\" />\r\n        <div className=\"toolbar_navigation-items\">\r\n              <ProcessForm \r\n                layers={props.layers} \r\n                handleNewFile={props.handleNewFile}\r\n              />\r\n        </div>\r\n    </nav>\r\n  </header>\r\n);\r\n\r\nexport default toolbar;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/Inbox';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    height: '200px',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nfunction ListItemLink(props) {\r\n  return <ListItem button component=\"a\" {...props}>\r\n            <ListItemIcon>\r\n              <InboxIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Inbox\" />\r\n          </ListItem>;\r\n}\r\n\r\nfunction createListItem(layers) {\r\n  var layerItems = layers.map((layer) =>\r\n  <ListItem button>\r\n    <ListItemIcon>\r\n      <Checkbox\r\n      edge=\"start\"\r\n      //checked={checked.indexOf(value) !== -1}\r\n      tabIndex={-1}\r\n      disableRipple\r\n      //inputProps={{ 'aria-labelledby': labelId }}\r\n      />\r\n    </ListItemIcon>\r\n    <ListItemText primary={layer.layer._leaflet_id} />\r\n  </ListItem>  \r\n  );\r\n  return layerItems;\r\n}\r\n\r\n  const SimpleList = (props) => {\r\n\r\n  const classes = useStyles();\r\n  const layers = props.layers;\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n        {createListItem(layers)}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SimpleList;\r\n\r\n{/* <ListItem button>\r\n<ListItemIcon>\r\n  <InboxIcon />\r\n</ListItemIcon>\r\n<ListItemText primary=\"Inbox\" />\r\n</ListItem>\r\n<ListItem button>\r\n<ListItemIcon>\r\n  <DraftsIcon />\r\n</ListItemIcon>\r\n<ListItemText primary=\"Drafts\" />\r\n</ListItem>\r\n</List>\r\n<Divider />\r\n<List component=\"nav\" aria-label=\"secondary mailbox folders\">\r\n<ListItem button>\r\n<ListItemText primary=\"Trash\" />\r\n</ListItem>\r\n<ListItemLink href=\"#simple-list\">\r\n<ListItemText primary=\"Spam\" />\r\n</ListItemLink> */}\r\n\r\n// const layerListElement = props => {\r\n\r\n//     return (\r\n//       // Try setting `justifyContent` to `center`.\r\n//       // Try setting `flexDirection` to `row`.\r\n//       <nav style={{\r\n//         flex: 1,\r\n//         flexDirection: 'column',\r\n//         justifyContent: 'space-between',\r\n//       }}>\r\n//       <nav style={{width: 50, height: 5, margin: 5, backgroundColor: 'steelblue'}} />\r\n//         <div>\r\n//         </div>\r\n//       </nav>\r\n//     );\r\n//   };","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/Button';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport { SliderPicker, AlphaPicker } from 'react-color';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { isTemplateElement } from '@babel/types';\r\n\r\n\r\nconst DisplayDialog = (props) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [newColor, changeColor] = React.useState();\r\n  const [name, changeName] = React.useState();\r\n\r\n  const [newOpacity, changeOpacity] = React.useState();\r\n  \r\n  const handleClickOpen = () => {\r\n    props.onClick()\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    props.onClose()\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleNameChange = (e) => {\r\n    changeName(e.target.value);\r\n  }\r\n\r\n  const handleColorChange = (color) => {\r\n    changeColor(color)\r\n  }\r\n\r\n  const handleOpacityChange = (opacity) => {\r\n    changeOpacity(opacity.rgb.a)\r\n  }\r\n\r\n  const doChanges = () => {\r\n    if ((name != \"\") && (name != undefined)) {\r\n      props.item.layer.name = name\r\n    } \r\n    if ((newColor != undefined) && (newColor.hex != props.item.layer.options.style.color))  {\r\n      props.item.layer.setStyle({ \r\n        weight: 2,\r\n        dashArray: '',\r\n        fillOpacity: 0.9,\r\n        fillColor: newColor.hex,\r\n        color: newColor.hex\r\n      })\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  let subFields = []\r\n\r\n  for (var i = 0; i < props.subTexts.length; i++) {\r\n    subFields.push(                  \r\n    <div>\r\n      <DialogContentText>\r\n        {props.subTexts[i]}\r\n      </DialogContentText>\r\n      <TextField\r\n      autoFocus\r\n      margin=\"dense\"\r\n      id={i}\r\n      onChange={(i==0) ? e => handleNameChange(e): \"\"}\r\n      fullWidth\r\n    />\r\n    </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n      onClick={handleClickOpen}\r\n    >\r\n      <MoreVertIcon />\r\n    </IconButton>\r\n  {/* <MenuItem onClick={handleClickOpen}>{props.heading}</MenuItem> */}\r\n      <Dialog open={open} \r\n              aria-labelledby=\"form-dialog-title\" \r\n              fullWidth={\"sm\"} \r\n              maxWidth={\"sm\"} \r\n              onClose={handleClose}>\r\n        <DialogTitle id=\"form-dialog-title\">{props.item.layer.name ? props.item.layer.name: props.item.layer._leaflet_id}</DialogTitle>\r\n        <DialogContent>\r\n          {subFields}\r\n        </DialogContent>\r\n        <div\r\n        style={{paddingTop: '4%',\r\n                marginLeft: '4%',\r\n                marginRight: '4%'\r\n              }}>\r\n        <SliderPicker\r\n          color={newColor}\r\n          onChange={handleColorChange}\r\n        />\r\n        </div>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={doChanges} color=\"primary\">\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\nexport default DisplayDialog","import React from 'react';\r\nimport IconButton from '@material-ui/core/Button';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport DisplayDialog from '../LayerList/changeDisplay.js';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst MenuListComposition = (props) => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const anchorRef = React.useRef(null);\r\n  let displayDialog = null;\r\n  const handleToggle = () => {\r\n    setOpen(prevOpen => !prevOpen);\r\n  };\r\n\r\n  const handleClose = event => {\r\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  function handleListKeyDown(event) {\r\n    if (event.key === 'Tab') {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  // return focus to the button when we transitioned from !open -> open\r\n  const prevOpen = React.useRef(open);\r\n  React.useEffect(() => {\r\n    if (prevOpen.current === true && open === false) {\r\n      anchorRef.current.focus();\r\n    }\r\n\r\n    prevOpen.current = open;\r\n  }, [open]);\r\n\r\n  const openDisplayDialog = () => {\r\n    console.log(\"jada\")\r\n    displayDialog = <div><DisplayDialog\r\n              onClick={closeDialog}\r\n              item={props.item}\r\n              heading={\"Change display\"}\r\n              subTexts={[\r\n                \"change layer name\",\r\n                // \"change edgecolor\",\r\n                // \"change edgesize\",\r\n              ]}\r\n            />\r\n            </div>\r\n  }\r\n\r\n  const closeDialog = () => {\r\n    displayDialog = null\r\n  }\r\n\r\n  if (displayDialog != null) {\r\n    return displayDialog\r\n  } else {\r\n    return (\r\n    <div>\r\n    <IconButton\r\n      ref={anchorRef}\r\n      aria-controls={open ? 'menu-list-grow' : undefined}\r\n      aria-haspopup=\"true\"\r\n      onClick={handleToggle}\r\n    >\r\n      <MoreVertIcon />\r\n    </IconButton>\r\n    <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition disablePortal>\r\n      {({ TransitionProps, placement }) => (\r\n        <Grow\r\n          {...TransitionProps}\r\n          style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\r\n        >\r\n          <Paper>\r\n            <ClickAwayListener onClickAway={handleClose}>\r\n              <MenuList autoFocusItem={open} id=\"menu-list-grow\" onKeyDown={handleListKeyDown}>\r\n                <MenuItem onClick={props.onZoomToLayer}>Zoom to layer</MenuItem>\r\n                <MenuItem onClick={props.changeDisplay}>Change layer display</MenuItem>\r\n                <MenuItem onClick={openDisplayDialog}>Change display</MenuItem>\r\n                {/* <DisplayDialog \r\n                  item={props.item}\r\n                  heading={\"Change display\"}\r\n                  subTexts={[\r\n                    \"change fillcolor\",\r\n                    \"change edgecolor\",\r\n                    \"change edgesize\",\r\n                  ]}\r\n                /> */}\r\n\r\n              </MenuList>\r\n            </ClickAwayListener>\r\n          </Paper>\r\n        </Grow>\r\n      )}\r\n    </Popper>\r\n    </div>\r\n    )}\r\n  }\r\n\r\nexport default MenuListComposition;","import React, { Component } from \"react\";\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  IconButton,\r\n  ListItemSecondaryAction,\r\n  Paper\r\n} from \"@material-ui/core\";\r\nimport RootRef from \"@material-ui/core/RootRef\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ContextMenu from '../CustomContext/ContextMenu.js';\r\nimport DisplayDialog from './changeDisplay.js';\r\nimport { border } from \"@material-ui/system\";\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n  // styles we need to apply on draggables\r\n  ...draggableStyle,\r\n\r\n  ...(isDragging && {\r\n    background: \"rgb(235,235,235)\",\r\n    borderRadius: \"8px\",\r\n  })\r\n});\r\n\r\nconst getliStyle = (isDraggingOver, item) => ({\r\n  border: isDraggingOver ? '' : 'solid',\r\n  margin: \"0 0 5px 0\",\r\n  borderRadius: \"8px\",\r\n  //borderColor: item.layer.options.style.color\r\n  //backgroundColor: isDraggingOver ? '' : item.layer.options.style.color,\r\n});\r\n\r\nconst getulStyle = (isDraggingOver, item) => ({\r\n  backgroundColor: isDraggingOver ? '' : item.layer.options.style.color,\r\n});\r\n\r\n\r\n\r\n\r\n\r\nclass LayerList extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      items: props.layers,\r\n      selectedIndex: null,\r\n      displayDialog: null,\r\n      disableDrag: false\r\n    };\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // document.addEventListener('contextmenu', function(event){\r\n    //   event.preventDefault();\r\n    // }); \r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // Typical usage (don't forget to compare props):\r\n    if (this.props.layers !== prevProps.layers) {\r\n\r\n      this.setState({\r\n        items: this.props.layers\r\n      });      \r\n    }\r\n  }\r\n\r\n  onZoomToLayer = (item) => {\r\n\r\n  }\r\n\r\n  changeDisplay = (item) => {\r\n\r\n  }\r\n\r\n  changeName = (item) => {\r\n    \r\n  }\r\n\r\n  onDragEnd(result) {\r\n    // dropped outside the list\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(\r\n      this.state.items,\r\n      result.source.index,\r\n      result.destination.index\r\n    );\r\n\r\n    //reorders the props\r\n    this.props.orderLayers(items);\r\n    this.setState({\r\n      items: items\r\n    });\r\n  }\r\n\r\n   rightClick(e) {\r\n  }\r\n\r\n\r\n\r\n  // Normally you would want to split things out into separate components.\r\n  // But in this example everything is just done in one place for simplicity\r\n  render() {\r\n    let visibility = <VisibilityIcon/>\r\n    let visibilityOff = <VisibilityOffIcon/>\r\n\r\n      return (\r\n      \r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <Droppable droppableId=\"droppable\">\r\n          {(provided, snapshot) => (\r\n            <RootRef rootRef={provided.innerRef}>\r\n              <Paper style={{maxHeight: \"75vh\", overflow: 'auto'}}>\r\n                <List >\r\n                  {this.props.layers.map((item, index) => (\r\n                    <li key={item.layer._} style={getliStyle(snapshot.isDraggingOver, item)}>\r\n                      <Draggable key={item.layer._leaflet_id} draggableId={item.layer._leaflet_id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <ListItem \r\n                            selected={this.props.selectedIndex === index}\r\n                            onClick={event => this.props.handleListItemClick(event, index)}\r\n                            onContextMenu={this.rightClick}\r\n                            ContainerComponent=\"li\"\r\n                            ContainerProps={{ ref: provided.innerRef }}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            style={this.state.disableDrag ? console.log() : getItemStyle(\r\n                              snapshot.isDragging,\r\n                              provided.draggableProps.style\r\n                            )}\r\n                          >\r\n                            {/* <ul style={getulStyle(snapshot.isDraggingOver, item)}> */}\r\n                              <ListItemText \r\n                                primary={item.layer.name ? item.layer.name: item.layer._leaflet_id}\r\n                                //secondary={item.layer._leaflet_id}\r\n                              />\r\n                            {/* </ul> */}\r\n                            <ListItemIcon />\r\n                            <ListItemIcon />\r\n\r\n                            <ListItemIcon>\r\n                              <IconButton id={item.layer._leaflet_id} onClick={() => this.props.toggleVisibility(item.layer)}>\r\n                                {item.layer.visibility ? visibility: visibilityOff}\r\n                              </IconButton>\r\n                            </ListItemIcon>\r\n                            <IconButton id={item.layer._leaflet_id} onClick={() => this.props.onDelete(item.layer._leaflet_id )}>\r\n                              <DeleteIcon />\r\n                            </IconButton>\r\n                            <div style={{\r\n                              zIndex: '800'}}>\r\n                            <DisplayDialog\r\n                              onClick={() => this.state.disableDrag = true}  \r\n                              onClose={() => this.state.disableDrag = false}                 \r\n                              item={item}\r\n                              heading={\"Change display\"}\r\n                              subTexts={[\r\n                                \"Change layer name\",\r\n                                //\"Change edgecolor\",\r\n                                // \"Change edgesize\",\r\n                              ]}  \r\n                                />\r\n                              </div>\r\n                            {/* <IconButton>\r\n                              <MoreVertIcon onClick={this.setState({moreOptions: item})}/>\r\n                            </IconButton> */}\r\n                            <ListItemSecondaryAction/>\r\n                          </ListItem>\r\n                        )}\r\n                      </Draggable>\r\n                    </li>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </List>\r\n              </Paper>\r\n            </RootRef>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default LayerList;","import React from 'react';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst backdrop = props => (\r\n    <div className=\"backdrop\" onClick={props.click} />\r\n);\r\n\r\nexport default backdrop;","import React from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport styled from 'styled-components';\r\nimport { create } from 'domain';\r\n\r\nconst Wrapper = styled.div`\r\n    width: ${props => props.width};\r\n    height: ${props => props.height}; \r\n`;\r\n\r\nfunction createPopup(feature, layer) {\r\n\t// does this feature have a property named popupContent?\r\n\tif (feature.properties && feature.properties.name) {\r\n\t\tlayer.bindPopup(feature.properties.name);\r\n\t}\r\n}\r\n\r\nexport default class Map extends React.Component {\r\n\r\n\r\n\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  state = {\r\n    file: this.props.file,\r\n    createLayerMode: this.props.createLayerMode,\r\n    createdLayer: null,\r\n  }\r\n\r\n  \r\n\r\n  componentDidMount = () => {\r\n    this.map = L.map('map', {\r\n        center: [40.7292369,-73.996565],\r\n        zoom: 13,\r\n        zoomControl: false,\r\n        layers: L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png', {\r\n          // 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?'\r\n                  detectRetina: true,\r\n                  maxZoom: 20,\r\n                  maxNativeZoom: 17,\r\n        }),\r\n    });\r\n    this.map.on('layeradd', this.props.addLayer);\r\n    this.map.on('click', this.props.clickCreateLayer)\r\n  }\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n\r\n    try {\r\n\r\n      \r\n      //If createlayermode just swapped to false or clickedpoints length just swapped to zero.\r\n    if (((prevProps.createLayerMode != false) && (this.props.createLayerMode == false)) || ((prevProps.clickedPoints.length != 0) && (this.props.clickedPoints.length == 0))) {\r\n      \r\n      this.map.removeLayer(this.state.layer)\r\n\r\n      //reversing coordinates to make them geojson order.\r\n      let coordinates = prevProps.clickedPoints\r\n      coordinates.forEach(latlng => {\r\n        latlng.reverse();\r\n      });\r\n\r\n      if(prevProps.createLayerMode == \"Polygon\") {\r\n        coordinates = [...coordinates, coordinates[0]]\r\n        coordinates = [coordinates]\r\n      }\r\n\r\n      this.createLayer(\r\n              {\r\n                \"type\": \"Feature\",\r\n                \"name\": \"Created \" + prevProps.createLayerMode,\r\n                \"geometry\": {\r\n                    \"type\": prevProps.createLayerMode,\r\n                    \"coordinates\": coordinates,\r\n                },\r\n              }\r\n      )\r\n\r\n      this.setState({\r\n        layer: null,\r\n      })\r\n      return\r\n    }\r\n  } catch {console.log(\"nevermind\")}\r\n\r\n    //Add new points\r\n    //If new points was added: or layermode was changed\r\n    if ((this.props.clickedPoints.length != prevProps.clickedPoints.length) || (this.props.createLayerMode != prevProps.createLayerMode)) {\r\n       if (this.state.layer != null) {\r\n        this.map.removeLayer(this.state.layer)\r\n      }\r\n      let newLayer;\r\n      if (this.props.createLayerMode == \"LineString\") {\r\n        newLayer = L.polyline(this.props.clickedPoints, {color: 'green'}).addTo(this.map);\r\n      } else if (this.props.createLayerMode == \"Polygon\") {\r\n        newLayer = L.polygon(this.props.clickedPoints, {color: 'green'}).addTo(this.map);\r\n      }\r\n      // } else if (this.props.createLayerMode == \"MultiPoint\") {\r\n      //   newLayer = L.polyline(this.props.clickedPoints, {color: 'red'}).addTo(this.map);\r\n      // } \r\n\r\n      this.setState({\r\n        layer: newLayer,\r\n      })  \r\n    }\r\n\r\n    //Create file from new imported geojson\r\n    if (this.props.file) {\r\n      this.createLayer(this.props.file);\r\n      this.props.resetFile();\r\n    }\r\n    //Remove the requested file\r\n    else if (this.props.deletedLayer) {\r\n      this.map.removeLayer(this.props.deletedLayer)\r\n      this.props.resetFile();\r\n    }\r\n    //hide the layer L by removing it from the map\r\n    else if (this.props.hide) {\r\n      this.map.removeLayer(this.props.hide)\r\n      this.props.resetFile();\r\n    }\r\n    //unhide the layer L by re-adding it to the map\r\n    else if (this.props.unhide) {\r\n      this.props.unhide.addTo(this.map)\r\n      this.map.addLayer(this.props.unhide)\r\n      this.props.resetFile();\r\n    }\r\n    else if (this.props.zoomTo.length != 0) {\r\n      try {\r\n        return this.map.fitBounds(this.props.zoomTo[0].layer.getBounds())\r\n      } catch {}\r\n      this.props.resetZoom()\r\n    }\r\n  }\r\n  \r\n\r\n\r\n  zoomToFeature = (e) => {\r\n    try { \r\n      return (e.layer ? this.map.fitBounds(e.target.getBounds()): \"$10.00\");\r\n    } catch {\r\n      \r\n    }\r\n  }\r\n\r\n  onEachFeature = (e) => {\r\n    this.map.on({\r\n      click: this.props.hideLayer,\r\n    })\r\n  }\r\n\r\n    //Creating a new layer from geojson-data\r\n  createLayer = (geojsonData) => {\r\n\r\n    let geoj = L.geoJSON(geojsonData, {\r\n      pointToLayer: function (feature, latlng) {\r\n          return L.circleMarker(latlng, {\r\n            radius: 5,\r\n            fillColor: \"#ff7800\",\r\n            color: \"#000\",\r\n            weight: 1,\r\n            opacity: 1,\r\n            fillOpacity: 0.9,\r\n          });\r\n      },\r\n      style: {color: '#'+Math.floor(Math.random()*16777215).toString(16), fillOpacity: 0.9},\r\n      onEachFeature: this.onEachFeature,\r\n      }).addTo(this.map);\r\n\r\n    geoj.name = geojsonData.name;\r\n    geoj.type = geojsonData.type;\r\n    geoj.visibility = true\r\n    geoj.setZIndex(-800);\r\n    geoj.bindPopup(\"part of: \" + geojsonData.name);\r\n    geoj.on({\r\n    //  mouseover: this.props.highlightFeature,\r\n    //  mouseout: this.props.resetHighlight,\r\n      click: this.zoomToFeature\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <Wrapper width=\"100%\" height=\"100%\" id='map' />\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nclass DragAndDrop extends Component {\r\n  state = {\r\n    drag: false\r\n  }\r\n  \r\n  dropRef = React.createRef()\r\n  handleDrag = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n  }\r\n\r\n  handleDragIn = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    this.dragCounter++\r\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n      this.setState({drag: true})\r\n    }\r\n  }\r\n  handleDragOut = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    this.dragCounter--\r\n    if (this.dragCounter === 0) {\r\n      this.setState({drag: false})\r\n    }\r\n  }\r\n  handleDrop = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    this.setState({drag: false})\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      this.props.handleDrop(e.dataTransfer.files)\r\n      e.dataTransfer.clearData()\r\n      this.dragCounter = 0    \r\n    }\r\n  }\r\n  componentDidMount() {\r\n    let div = this.dropRef.current\r\n    div.addEventListener('dragenter', this.handleDragIn)\r\n    div.addEventListener('dragleave', this.handleDragOut)\r\n    div.addEventListener('dragover', this.handleDrag)\r\n    div.addEventListener('drop', this.handleDrop)\r\n  }\r\n  componentWillUnmount() {\r\n    let div = this.dropRef.current\r\n    div.removeEventListener('dragenter', this.handleDragIn)\r\n    div.removeEventListener('dragleave', this.handleDragOut)\r\n    div.removeEventListener('dragover', this.handleDrag)\r\n    div.removeEventListener('drop', this.handleDrop)\r\n  }\r\n  render() {\r\n    return (\r\n      <div\r\n        style={{display: 'inline-block', position: 'relative'}}\r\n        ref={this.dropRef}\r\n      >\r\n        {this.state.dragging &&\r\n          <div \r\n            style={{\r\n              border: 'dashed grey 4px',\r\n              backgroundColor: 'rgba(100,100,255,.8)',\r\n              position: 'absolute',\r\n              top: 0,\r\n              bottom: 0,\r\n              left: 0, \r\n              right: 0,\r\n              zIndex: 9999\r\n            }}\r\n          >\r\n            <div \r\n              style={{\r\n                position: 'absolute',\r\n                top: '50%',\r\n                right: 0,\r\n                left: 0,\r\n                textAlign: 'center',\r\n                color: 'grey',\r\n                fontSize: 36\r\n              }}\r\n            >\r\n              <div>drop here :)</div>\r\n            </div>\r\n          </div>\r\n        }\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default DragAndDrop","import PublishIcon from '@material-ui/icons/Publish';\r\nimport React, { Component, useCallback } from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\n\r\n\r\nfunction MyDropzone(props) {\r\n    const onDrop = useCallback(acceptedFiles => {  \r\n     \r\n         acceptedFiles.forEach((file) => {\r\n           const reader = new FileReader()\r\n           reader.onabort = () => console.log('file reading was aborted')\r\n           reader.onerror = () => console.log('file reading has failed')\r\n           reader.onload = () => {\r\n             // Do whatever you want with the file contents\r\n             const binaryStr = reader.result\r\n             let jsonLayer = JSON.parse(binaryStr)\r\n             props.handleNewFile(jsonLayer);\r\n           }\r\n           reader.readAsBinaryString(file)\r\n         })\r\n       }, []);\r\n   \r\n     const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\r\n   \r\n       return (\r\n         <div {...getRootProps()}>\r\n           <input {...getInputProps()} />\r\n           {\r\n             isDragActive ?\r\n              <p style={{height: \"75px\",  position: \"flex\", textAlign: \"center\", border: \"dashed\", borderRadius: \"8px\", boxShadow: \"10\", background: \"lightgreen\"}}><PublishIcon /></p>:\r\n              <div>\r\n               <p style={{height: \"75px\", position: \"flex\", textAlign: \"center\", borderRadius: \"8px\", border: \"dashed\"}}><PublishIcon /><p>Click or drag to add files!</p></p>\r\n               \r\n              </div>\r\n           }\r\n         </div>\r\n       )\r\n     }\r\n\r\nexport default MyDropzone;","import React, { Component, useCallback } from 'react';\nimport Toolbar from './components/Toolbar/Toolbar';\nimport SideDrawer from './components/SideDrawer/SideDrawer';\nimport Backdrop from './components/Backdrop/Backdrop';\nimport Map from './Map/index';\nimport LayerList from './components/LayerList/LayerList.js';\nimport DragAndDrop from './components/DragAndDrop.js';\nimport Dropzone from 'react-dropzone';\nimport { Resizable, ResizableBox } from 'react-resizable';\nimport { colors, Hidden } from '@material-ui/core';\nimport { textAlign } from '@material-ui/system';\nimport MyDropzone from './components/DropZone.js';\nimport SimpleSnackbar from './components/Processing/Snackbar.js';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.orderLayers = this.orderLayers.bind(this)\n    this.addLayer = this.addLayer.bind(this)\n    this.handleNewFile = this.handleNewFile.bind(this);\n  }\n\n  state = {\n    sideDrawerOpen: true,  \n    layers: [],\n    selectedIndex: null,\n    file: null,\n    deletedLayers: [],\n    deletedLayer: null, \n    hide: null,\n    unhide: null,\n    zoomTo: [],\n    createLayerMode: false,\n    clickedPoints: [],\n    // createdLayer: null,\n  }\n\n  drawerToggleClickHandler = () => {\n    this.setState((prevState) => {\n      return {sideDrawerOpen: !prevState.sideDrawerOpen};\n    });\n  };\n\n  toggleCreateMode = (event) => {\n    if ((event == false) || (event == \"quit\")) {\n      this.setState({\n        createLayerMode: event,\n        clickedPoints: [],\n      })\n    } else if (event == \"reset\") {\n      this.setState({\n        clickedPoints: []\n      })\n    } else {\n      this.setState({\n        createLayerMode: event,\n      })\n    }\n  }\n\n  openGeoProcess = () => {}\n\n  backdropClickHandler = () => {\n    this.setState({sideDrawerOpen: false});\n  };\n\n  handleNewFile = (file) => {\n    this.setState({\n      file: file\n    });  \n  }\n\n  handleListItemClick = (event, index) => {\n    this.setState({\n      selectedIndex: index,\n      zoomTo: [this.state.layers[index]],\n    });\n\n    try {\n    } catch {\n    }\n\n  };\n\n\n\n\n  handleDelete = itemId => {\n    \n    try {\n      //Finds the layer we are going to delete\n      let layerToDelete = this.state.layers.filter(l => l.layer._leaflet_id == itemId)[0]\n\n      // Save the deleted layer so you can undo it later;\n      // updates the new state... Does not add the layer...\n      this.state.deletedLayers.push(layerToDelete)\n      this.setState({\n        deletedLayer: layerToDelete.layer,\n        layers: this.state.layers.filter(l => l.layer._leaflet_id !== itemId)\n      });\n    } catch {\n      alert('could not remove the layer');\n    }\n  };\n\n  orderLayers(newLayers) {\n    this.setState({\n       layers: newLayers\n    })\n    for (var i = 0; i < this.state.layers.length;  i++) {\n\n    }\n  };\n\n\n  addLayer = (layer) => {\n    //Checks if the layer exists from before\n    let existingLayer = this.state.layers.find(l => l.layer._leaflet_id == layer.layer._leaflet_id)\n    if (layer.layer._layers && !layer.layer._svgSize && existingLayer == undefined) {\n      //this.state.layers.push(layer);\n      this.setState({\n        layers: [...this.state.layers, layer],\n      })\n      layer.key = layer.layer._leaflet_id\n    } \n  }\n\n  clickCreateLayer = (e) => {\n    if (this.state.createLayerMode != false) {\n      this.setState({\n        clickedPoints: [...this.state.clickedPoints, [e.latlng.lat, e.latlng.lng]]\n      })\n    } \n  }\n\n\n\n//Leaflet functions for passing on to layerlist\n  resetHighlight = (e) => {\n    e.target.setStyle({\n      weight: 1,\n      dashArray: '',\n      fillOpacity: 0.4\n    });\n  }\n\n  zoomToLayer = (e) => {\n    this.setState({\n      zoomTo: e\n    })\n  }\n\n  resetZoom = () => {\n    this.setState({\n      zoomTo: [],\n    })\n  }\n\n  toggleVisibility = (e) => {\n    if (e.visibility) {\n      this.setState({\n        hide: e\n      })\n    } else {\n      this.setState({\n        unhide: e\n      })\n    }\n    e.visibility = !e.visibility\n  }\n\n  resetFile = () => {\n    this.setState({\n      file: null,\n      deletedLayer: null,\n      hide: null,\n      unhide: null,\n   })  \n  }\n  \n  \n  highlightFeature = (e) => {\n    e.target.setStyle({\n      weight: 2,\n      dashArray: '',\n      fillOpacity: 0.6\n    });\n  }\n  \n  selectLayer = (id) => {\n\n  }\n\n\n  render() {\n    let backdrop;\n    if (this.state.sideDrawerOpen) {\n      backdrop = <Backdrop click={this.backdropClickHandler} />\n    }\n    return (\n      <div style={{\n        height: '100%',\n        width: '100%'}}>\n        <div style={{\n          height: '100vh - 46px',\n          width: '19.5vw',\n          position: 'absolute',\n          marginTop: \"46px\",\n          marginLeft: \"0.1vw\",\n          }}>\n          <MyDropzone \n            handleNewFile={this.handleNewFile}  \n          />\n          <LayerList \n          handleListItemClick={this.handleListItemClick} \n          selectedIndex={this.state.selectedIndex}\n          layers={this.state.layers} \n          orderLayers={this.orderLayers} \n          onDelete={this.handleDelete}\n          toggleVisibility={this.toggleVisibility}\n          zoomTo={this.state.zoomTo}\n          />\n\n                    \n        </div>\n        <Toolbar \n        drawerClickHandler={this.drawerToggleClickHandler} \n        layers={this.state.layers}\n        handleNewFile={this.handleNewFile}\n        toggleCreateMode={this.toggleCreateMode}\n        createLayerMode={this.state.createLayerMode}\n        />\n        <main style={{marginLeft: '20vw', height: '100vh', width: '80vw', overflow: 'auto', zIndex: \"-1999\"}}>\n          <Map  \n            addLayer={this.addLayer}\n            // createLayer={this.clickCreateMode}\n            highlightFeature={this.highlightFeature}\n            resetHighlight={this.resetHighlight}\n            selectLayer={this.selectLayer}\n            file={this.state.file}\n            resetFile={this.resetFile}\n            layers={this.state.layers}\n            deletedLayers={this.state.deletedLayers}\n            deletedLayer={this.state.deletedLayer}\n            toggleVisibility={this.toggleVisibility}\n            hide={this.state.hide}\n            unhide={this.state.unhide}\n            zoomTo={this.state.zoomTo}\n            resetZoom={this.resetZoom}\n            createLayerMode={this.state.createLayerMode}\n            clickCreateLayer={this.clickCreateLayer}\n            clickedPoints={this.state.clickedPoints}\n            // createdLayer={this.state.createdLayer}\n          />\n          </main>\n\n        {/*\n        {//backdrop}\n        }\n        <SideDrawer layers={this.state.layers} show={this.state.sideDrawerOpen} />\n */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}