(window.webpackJsonpleafletapp=window.webpackJsonpleafletapp||[]).push([[0],{272:function(e,t,a){e.exports=a(550)},277:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},544:function(e,t,a){},550:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(9),o=a.n(l),i=(a(277),a(30)),s=a(17),c=a(14),u=a(19),p=a(20),y=a(26),d=a(21),m=a(595),h=a(607),f=a(598),g=a(597),b=a(594),v=a(596),E=a(36),k=a(582),C=a(609),P=a(589),w=a(584),O=a(604),L=Object(k.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120}}}));function S(e){var t=e.initialParam,a=e.type,r=e.layers,l=e.tools,o=e.setParentValue,i=L(),s=n.a.useState(t),c=Object(E.a)(s,2),u=c[0],p=c[1],y=n.a.useState(!1),d=Object(E.a)(y,2),m=d[0],h=d[1];return n.a.createElement("div",null,n.a.createElement("form",{autoComplete:"off"},n.a.createElement(w.a,{className:i.formControl},n.a.createElement(C.a,{htmlFor:"selector"},a),n.a.createElement(O.a,{open:m,onClose:function(){h(!1)},onOpen:function(){h(!0)},value:u,onChange:function(e){p(e.target.value),o(e.target.value)},inputProps:{name:"value"}},n.a.createElement(P.a,{value:"-1"},n.a.createElement("em",null,"None")),"tools"==a?l?l.map((function(e,t){return n.a.createElement(P.a,{value:t},n.a.createElement("em",null,e))})):alert("Something went horribly wrong"):r?r.map((function(e,t){return n.a.createElement(P.a,{value:t},n.a.createElement("em",null,e.layer.name?e.layer.name:e.layer._leaflet_id))})):alert("No "+{layers:r}+" to process... Add a layer by dragging it into the left column.")))))}var j=a(12),x=a(29),M=a.n(x);function I(e,t){var a=[],r=[];try{var n=[];e[0].layer.eachLayer((function(e){if("Polygon"==e.feature.geometry.type)a.push(e.feature);else{if("MultiPolygon"!=e.feature.geometry.type)return t("...Invalid geometry-types!","error"),null;n.push(e.feature.geometry.coordinates.map((function(e){return j.polygon(e)})))}})),n.forEach((function(e){a.push(e[0])})),n=[],e[1].layer.eachLayer((function(e){if("Polygon"==e.feature.geometry.type||"MultiPolygon"==e.feature.geometry.type)r.push(e.feature);else{if("MultiPolygon"!=e.feature.geometry.type)return t("...Invalid geometry-types!","error"),null;n.push(e.feature.geometry.coordinates.map((function(e){return j.polygon(e)})))}})),n.forEach((function(e){r.push(e[0])}))}catch(i){t("something went wrong while loading the layers. Check your inputs before trying again...","error")}var l=[];try{a.forEach((function(e){r.forEach((function(t){var a=null;try{a=null==(a=j.difference(e,t))?e:j.difference(e,a)}catch(r){}null!==a&&l.push(a)}))}))}catch(s){return t("Could not generate the intersection. Contact your highest superior","error"),null}var o="new_";return e[0].layer.name&&(o=e[0].layer.name),{type:"FeatureCollection",name:o+" intersection",features:l}}var T=a(586),F=a(142),N=a.n(F),_=(a(114),a(2)),D=a(593),V=a(4),z=a(234),R=a.n(z),H=a(236),W=a.n(H),B=a(237),A=a.n(B),Z=a(99),U=a.n(Z),J=a(590),Y=a(591),G=a(592),$=a(556),q=a(235),Q=a.n(q),K={success:R.a,warning:Q.a,error:W.a,info:A.a},X=Object(k.a)((function(e){return{success:{backgroundColor:J.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Y.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function ee(e){var t=X(),a=e.className,r=e.message,l=e.onClose,o=e.variant,i=Object(_.a)(e,["className","message","onClose","variant"]),s=K[o];return n.a.createElement($.a,Object.assign({className:Object(V.a)(t[o],a),"aria-describedby":"client-snackbar",message:n.a.createElement("span",{id:"client-snackbar",className:t.message},n.a.createElement(s,{className:Object(V.a)(t.icon,t.iconVariant)}),r),action:[n.a.createElement(G.a,{key:"close","aria-label":"close",color:"inherit",onClick:l},n.a.createElement(U.a,{className:t.icon}))]},i))}var te=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(D.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:8e3,open:this.props.open,onClose:this.props.toggleSnackbar},n.a.createElement(ee,{onClose:this.props.toggleSnackbar,variant:this.props.msgType,message:this.props.msg})))}}]),t}(n.a.Component);var ae=a(238);var re=Object(k.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2),color:"white",floodColor:"black"},formControl:{margin:e.spacing(1),minWidth:120},input:{margin:e.spacing(1)}}})),ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.toggleSnackbar=function(e,t){("string"===typeof e||e instanceof String)&&("string"===typeof t||t instanceof String)?a.setState({snackbar:!0,snackbarMsg:e,snackbarType:t}):"clickaway"!==t&&a.setState({snackbar:!1,snackbarMsg:"",snackbarType:""})},a.handleClose=function(){a.setState({open:!1})},a.setTool=function(e){a.setState({selectedToolIndex:e})},a.setParam=function(e){a.state.param1!=e&&(a.state.param2==e&&a.toggleSnackbar("You must choose two differen't layers","warning"),a.setState({param1:e}))},a.setParam2=function(e){a.state.param2!=e&&(a.state.param1==e&&a.toggleSnackbar("You must choose two differen't layers","warning"),a.setState({param2:e}))},a.setNumberParam=function(e){a.setState({numberParameter:e.target.value})},a.displaySnackbar=function(){return n.a.createElement(te,{open:a.state.snackbar,toggleSnackbar:a.toggleSnackbar,msgType:a.state.snackbarType?a.state.snackbarType:"success",msg:a.state.snackbarMsg?a.state.snackbarMsg:"hello"})},a.doProcess=function(){var e=a.state.tools[a.state.selectedToolIndex],t=a.props.layers[a.state.param1],r=a.props.layers[a.state.param2],n=a.state.numberParameter,l=null;switch(e){case"UNION":l=function(e,t){try{var a=[];e.forEach((function(e){e.layer.eachLayer((function(e){a.push(e.feature)}))}))}catch(n){return void t("Inputs are not valid...","error")}try{var r=j.union.apply(j,a);return r.name=e[0].layer.name+" + "+e[1].layer.name,r}catch(l){return t("something went wrong while loading the layers. Check your inputs before trying again...","error"),null}}([t,r],n,a.toggleSnackbar);break;case"BUFFER":l=function(e,t,a){a("Validating input...","info");try{var r={type:"FeatureCollection",features:[]};e.layer.eachLayer((function(e){r.features.push(e.feature)})),a("Validation complete. Continuing with buffer-operation...","info")}catch(l){return a("something went wrong while loading the layers. Check your inputs before trying again...","error"),null}try{var n=j.buffer(r,t,{units:"kilometers"});return n.name=e.layer.name+" "+t+"km_buffer",n}catch(o){return a("Could not generate the buffer. Contact your highest superior","error"),null}}(t,n,a.toggleSnackbar);break;case"INTERSECT":l=I([t,r],a.toggleSnackbar);break;case"SIMPLIFY":l=function(e,t,a){try{var r={type:"FeatureCollection",name:"simplified"+t+e.layer.name,features:[]};e.layer.eachLayer((function(e){r.features.push(e.feature)}))}catch(l){a("something went wrong while loading the layers. Check your inputs before trying again...","error")}try{var n={tolerance:t,highQuality:!1};return j.simplify(r,n)}catch(o){return a("Could not generate the simplified layer. Contact your highest superior","error"),null}}(t,n,a.toggleSnackbar);break;case"CLIP":l=function(e,t,a){a("Validating input...","info");try{var r,n={type:"FeatureCollection",name:e.layer.name+"_clipped",features:[]};e.layer.eachLayer((function(e){r=e.feature.geometry.type,n.features.push(e.feature)}));var l=null;t.layer.eachLayer((function(e){var t=e.feature.geometry.type;"Polygon"!=t&&"MultiPolygon"!=t&&Object(ae.fail)(),l=e.feature})),a("Validation complete. Continuing with buffer-operation...","info")}catch(i){return a("something went wrong while loading the layers. Check your inputs before trying again...","error"),null}if("Point"==r)return j.pointsWithinPolygon(n,l);if("Polygon"==r||"MultiPolygon"==r)return I([e,t],a);if("LineString"==r){var o=[];return n.features.forEach((function(e){j.lineSplit(e,l).features.forEach((function(e){var t,a=e.geometry.coordinates;t=2==a.length?j.center(e):j.point(a[1]),j.pointsWithinPolygon(t,l).features.length>0&&o.push(e)}))})),n.features=o,n}}(t,r,a.toggleSnackbar);break;case"DIFFERENCE":l=function(e,t){try{var a=[],r=[];e[0].layer.eachLayer((function(e){"MultiPolygon"==e.feature.geometry.type&&a.push(e.feature.geometry.coordinates.map((function(e){return j.polygon(e)}))),a.push(e.feature)})),e[1].layer.eachLayer((function(e){"MultiPolygon"==e.feature.geometry.type&&r.push(e.feature.geometry.coordinates.map((function(e){return j.polygon(e)}))),r.push(e.feature)}))}catch(l){return void t("Inputs are not valid...","error")}try{var n={type:"FeatureCollection",name:e[0].layer.name+"_diff_"+e[1].layer.name,features:[]};return a.forEach((function(e){var t=e,a=!1;r.forEach((function(r){var n=j.difference(e,r);if(null!=n){var l=j.intersect(n,t);null!=l&&(t=l,a=!0)}})),a&&n.features.push(t)})),t("erased "+e[1].layer.name+" from "+e[0].layer.name,"success"),n}catch(o){return t("something went wrong while loading the layers. Check your inputs before trying again...","error"),null}}([t,r],a.toggleSnackbar)}null!=l&&(a.props.handleNewFile(l),a.toggleSnackbar("...Success!","success")),a.setState({open:!1,param1:null,param2:null,numberParameter:.001})},a.state={layers:a.props.layers,selectedToolIndex:-1,open:!1,tools:["UNION","BUFFER","INTERSECT","SIMPLIFY","CLIP","DIFFERENCE"],parameters:[],param1:null,param2:null,numberParameter:.001,snackbar:!1,snackbarMsg:"",snackbarType:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,a;switch(this.state.selectedToolIndex){case-1:break;case 0:e=n.a.createElement("div",null,n.a.createElement(b.a,null,"Choose the layers you want to find the union of."),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"1st Input layer"}),n.a.createElement(S,{setParentValue:this.setParam2,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"2nd Input layer"})));break;case 1:e=n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"Input",typeText:"Choose the layer you want to make a buffer around."}),t=n.a.createElement(T.a,{onChange:this.setNumberParam,placeholder:"Buffer distance (km)",inputProps:{"aria-label":"description"}}),a=n.a.createElement(b.a,null,"Insert the buffer distance. In kilometres");break;case 2:e=n.a.createElement("div",null,n.a.createElement(b.a,null,"Choose the layers you want to find the intersection of."),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"1st Input layer"}),n.a.createElement(S,{setParentValue:this.setParam2,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"2nd Input layer"})));break;case 3:e=n.a.createElement("div",null,n.a.createElement(b.a,null,"Choose the layer you want to simplify."),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"Input layer"}))),t=n.a.createElement(T.a,{onChange:this.setNumberParam,placeholder:"Default 0.001",inputProps:{"aria-label":"description"}}),a=n.a.createElement(b.a,null,"Insert tolerance factor. Must be higher than 0.");break;case 4:e=n.a.createElement("div",null,n.a.createElement(b.a,null,"Choose the layer you want to clip."),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"Input line-layer"}),n.a.createElement(S,{setParentValue:this.setParam2,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"clip on polygon:"})));break;case 5:e=n.a.createElement("div",null,n.a.createElement(b.a,null,"Choose the layer and the layer you want to remove."),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(S,{setParentValue:this.setParam,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"Input"}),n.a.createElement(S,{setParentValue:this.setParam2,initialParam:-1,tools:this.state.tools,layers:this.props.layers,type:"Minus this layer:"})))}return n.a.createElement("div",null,n.a.createElement(m.a,{variant:"contained",color:"primary",className:re.button,onClick:this.handleClickOpen},n.a.createElement(N.a,null),"Geoprocess"),n.a.createElement(h.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},n.a.createElement(v.a,{id:"form-dialog-title"},"Processing Tools"),n.a.createElement(g.a,null,n.a.createElement(b.a,null,"Choose the tool you want to use"),n.a.createElement(S,{initialParam:this.state.selectedToolIndex,setParentValue:this.setTool,tools:this.state.tools,type:"tools"}),e,a,t),n.a.createElement(f.a,null,n.a.createElement(m.a,{onClick:this.handleClose,color:"primary"},"Cancel"),n.a.createElement(m.a,{onClick:this.doProcess,color:"primary"},"Process"))),this.state.snackbar?this.displaySnackbar():"")}}]),t}(n.a.Component),le=(a(286),a(144)),oe=a.n(le),ie=a(239),se=a.n(ie),ce=Object(k.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2),color:"white",floodColor:"black"},formControl:{margin:e.spacing(1),minWidth:120},input:{margin:e.spacing(1)}}})),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(){a.state.open?a.handleClose():a.handleOpen()},a.handleOpen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon";a.setState({open:!0,icon:n.a.createElement(se.a,null),text:"Save layer",color:"default"}),a.props.toggleCreateMode(e)},a.handleClose=function(){a.setState({open:!1,icon:n.a.createElement(oe.a,null),text:"create new layer",color:"primary"}),a.props.toggleCreateMode(!1)},a.handleSelect=function(e){a.props.toggleCreateMode(e.target.value),a.setState({type:e.target.value})},a.state={open:!1,icon:n.a.createElement(oe.a,null,"kj\xf8asdf"),text:"create new layer",color:"primary",type:"Polygon"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:{spacing:50}},this.state.open?n.a.createElement(O.a,{value:this.state.type,onChange:this.handleSelect},n.a.createElement(P.a,{value:"LineString"},"LineString"),n.a.createElement(P.a,{value:"Polygon"},"Polygon")):"",n.a.createElement(m.a,{variant:"contained",color:this.state.color,className:ce.button,onClick:this.handleClick},this.state.icon,this.state.text))}}]),t}(n.a.Component),pe=(a(287),function(e){return n.a.createElement("header",{className:"toolbar"},n.a.createElement("nav",{className:"toolbar__navigation"},n.a.createElement("div",{className:"spacer"}),n.a.createElement("div",{className:"toolbar_navigation-items"},n.a.createElement(ue,{createLayerMode:e.createLayerMode,toggleCreateMode:e.toggleCreateMode})),n.a.createElement("div",{className:"minispacer"}),n.a.createElement("div",{className:"toolbar_navigation-items"},n.a.createElement(ne,{layers:e.layers,handleNewFile:e.handleNewFile}))))}),ye=(a(288),a(554)),de=a(555),me=a(599),he=a(600);a(240),a(605),Object(k.a)((function(e){return{root:{width:"100%",height:"200px",maxWidth:360,backgroundColor:e.palette.background.paper}}}));var fe=a(10),ge=a(553),be=a(603),ve=a(602),Ee=a(75),ke=a(243),Ce=a.n(ke),Pe=a(244),we=a.n(Pe),Oe=a(249),Le=a.n(Oe),Se=(a(557),a(551),a(601),a(588),a(104)),je=a.n(Se),xe=a(608),Me=a(241),Ie=(a(446),function(e){for(var t=n.a.useState(!1),a=Object(E.a)(t,2),r=a[0],l=a[1],o=n.a.useState(),i=Object(E.a)(o,2),s=i[0],c=i[1],u=n.a.useState(),p=Object(E.a)(u,2),y=p[0],d=p[1],k=n.a.useState(),C=Object(E.a)(k,2),P=(C[0],C[1],function(){e.onClose(),l(!1)}),w=function(e){d(e.target.value)},O=[],L=0;L<e.subTexts.length;L++)O.push(n.a.createElement("div",null,n.a.createElement(b.a,null,e.subTexts[L]),n.a.createElement(xe.a,{autoFocus:!0,margin:"dense",id:L,onChange:0==L?function(e){return w(e)}:"",fullWidth:!0})));return n.a.createElement("div",null,n.a.createElement(m.a,{onClick:function(){e.onClick(),l(!0)}},n.a.createElement(je.a,null)),n.a.createElement(h.a,{open:r,"aria-labelledby":"form-dialog-title",fullWidth:"sm",maxWidth:"sm",onClose:P},n.a.createElement(v.a,{id:"form-dialog-title"},e.item.layer.name?e.item.layer.name:e.item.layer._leaflet_id),n.a.createElement(g.a,null,O),n.a.createElement("div",{style:{paddingTop:"4%",marginLeft:"4%",marginRight:"4%"}},n.a.createElement(Me.SliderPicker,{color:s,onChange:function(e){c(e)}})),n.a.createElement(f.a,null,n.a.createElement(m.a,{onClick:P,color:"primary"},"Cancel"),n.a.createElement(m.a,{onClick:function(){""!=y&&void 0!=y&&(e.item.layer.name=y),void 0!=s&&s.hex!=e.item.layer.options.style.color&&e.item.layer.setStyle({weight:2,dashArray:"",fillOpacity:.9,fillColor:s.hex,color:s.hex}),P()},color:"primary"},"Confirm"))))});Object(k.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)}}}));function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Fe=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(a,!0).forEach((function(t){Object(fe.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{},e&&{background:"rgb(235,235,235)",borderRadius:"8px"})},Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).onZoomToLayer=function(e){},a.changeDisplay=function(e){},a.changeName=function(e){},a.state={items:e.layers,selectedIndex:null,displayDialog:null,disableDrag:!1},a.onDragEnd=a.onDragEnd.bind(Object(y.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.layers!==e.layers&&this.setState({items:this.props.layers})}},{key:"onDragEnd",value:function(e){if(e.destination){var t=function(e,t,a){var r=Array.from(e),n=r.splice(t,1),l=Object(E.a)(n,1)[0];return r.splice(a,0,l),r}(this.state.items,e.source.index,e.destination.index);this.props.orderLayers(t),this.setState({items:t})}}},{key:"rightClick",value:function(e){}},{key:"render",value:function(){var e=this,t=n.a.createElement(Ce.a,null),a=n.a.createElement(we.a,null);return n.a.createElement(Ee.a,{onDragEnd:this.onDragEnd},n.a.createElement(Ee.c,{droppableId:"droppable"},(function(r,l){return n.a.createElement(ve.a,{rootRef:r.innerRef},n.a.createElement(ge.a,{style:{maxHeight:"75vh",overflow:"auto"}},n.a.createElement(ye.a,null,e.props.layers.map((function(r,o){return n.a.createElement("li",{key:r.layer._,style:(i=l.isDraggingOver,{border:i?"":"solid",margin:"0 0 5px 0",borderRadius:"8px"})},n.a.createElement(Ee.b,{key:r.layer._leaflet_id,draggableId:r.layer._leaflet_id,index:o},(function(l,i){return n.a.createElement(de.a,Object.assign({selected:e.props.selectedIndex===o,onClick:function(t){return e.props.handleListItemClick(t,o)},onContextMenu:e.rightClick,ContainerComponent:"li",ContainerProps:{ref:l.innerRef}},l.draggableProps,l.dragHandleProps,{style:e.state.disableDrag?console.log():Fe(i.isDragging,l.draggableProps.style)}),n.a.createElement(he.a,{primary:r.layer.name?r.layer.name:r.layer._leaflet_id}),n.a.createElement(me.a,null),n.a.createElement(me.a,null),n.a.createElement(me.a,null,n.a.createElement(G.a,{id:r.layer._leaflet_id,onClick:function(){return e.props.toggleVisibility(r.layer)}},r.layer.visibility?t:a)),n.a.createElement(G.a,{id:r.layer._leaflet_id,onClick:function(){return e.props.onDelete(r.layer._leaflet_id)}},n.a.createElement(Le.a,null)),n.a.createElement("div",{style:{zIndex:"800"}},n.a.createElement(Ie,{onClick:function(){return e.state.disableDrag=!0},onClose:function(){return e.state.disableDrag=!1},item:r,heading:"Change display",subTexts:["Change layer name"]})),n.a.createElement(be.a,null))})));var i})),r.placeholder)))})))}}]),t}(r.Component),_e=(a(544),function(e){return n.a.createElement("div",{className:"backdrop",onClick:e.click})}),De=a(250);a(545);function Ve(){var e=Object(De.a)(["\n    width: ",";\n    height: ","; \n"]);return Ve=function(){return e},e}var ze=a(251).a.div(Ve(),(function(e){return e.width}),(function(e){return e.height}));var Re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={file:a.props.file,createLayerMode:a.props.createLayerMode,createdLayer:null},a.componentDidMount=function(){a.map=M.a.map("map",{center:[40.7292369,-73.996565],zoom:13,zoomControl:!1,layers:M.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",{detectRetina:!0,maxZoom:20,maxNativeZoom:17})}),a.map.on("layeradd",a.props.addLayer),a.map.on("click",a.props.clickCreateLayer)},a.componentDidUpdate=function(e){try{if(0!=e.createLayerMode&&0==a.props.createLayerMode||0!=e.clickedPoints.length&&0==a.props.clickedPoints.length){a.map.removeLayer(a.state.layer);var t=e.clickedPoints;return t.forEach((function(e){e.reverse()})),"Polygon"==e.createLayerMode&&(t=[t=[].concat(Object(i.a)(t),[t[0]])]),a.createLayer({type:"Feature",name:"Created "+e.createLayerMode,geometry:{type:e.createLayerMode,coordinates:t}}),void a.setState({layer:null})}}catch(n){console.log("nevermind")}var r;a.props.clickedPoints.length==e.clickedPoints.length&&a.props.createLayerMode==e.createLayerMode||(null!=a.state.layer&&a.map.removeLayer(a.state.layer),"LineString"==a.props.createLayerMode?r=M.a.polyline(a.props.clickedPoints,{color:"green"}).addTo(a.map):"Polygon"==a.props.createLayerMode&&(r=M.a.polygon(a.props.clickedPoints,{color:"green"}).addTo(a.map)),a.setState({layer:r}));if(a.props.file)a.createLayer(a.props.file),a.props.resetFile();else if(a.props.deletedLayer)a.map.removeLayer(a.props.deletedLayer),a.props.resetFile();else if(a.props.hide)a.map.removeLayer(a.props.hide),a.props.resetFile();else if(a.props.unhide)a.props.unhide.addTo(a.map),a.map.addLayer(a.props.unhide),a.props.resetFile();else if(0!=a.props.zoomTo.length){try{return a.map.fitBounds(a.props.zoomTo[0].layer.getBounds())}catch(l){}a.props.resetZoom()}},a.zoomToFeature=function(e){try{return e.layer?a.map.fitBounds(e.target.getBounds()):"$10.00"}catch(t){}},a.onEachFeature=function(e){a.map.on({click:a.props.hideLayer})},a.createLayer=function(e){var t=M.a.geoJSON(e,{pointToLayer:function(e,t){return M.a.circleMarker(t,{radius:5,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.9})},style:{color:"#"+Math.floor(16777215*Math.random()).toString(16),fillOpacity:.9},onEachFeature:a.onEachFeature}).addTo(a.map);t.name=e.name,t.type=e.type,t.visibility=!0,t.setZIndex(-800),t.bindPopup("part of: "+e.name),t.on({click:a.zoomToFeature})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(ze,{width:"100%",height:"100%",id:"map"})}}]),t}(n.a.Component),He=(r.Component,a(143)),We=(a(546),a(148)),Be=a.n(We);var Ae=function(e){var t=Object(r.useCallback)((function(t){t.forEach((function(t){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var t=a.result,r=JSON.parse(t);e.handleNewFile(r)},a.readAsBinaryString(t)}))}),[]),a=Object(He.a)({onDrop:t}),l=a.getRootProps,o=a.getInputProps,i=a.isDragActive;return n.a.createElement("div",l(),n.a.createElement("input",o()),i?n.a.createElement("p",{style:{height:"75px",position:"flex",textAlign:"center",border:"dashed",borderRadius:"8px",boxShadow:"10",background:"lightgreen"}},n.a.createElement(Be.a,null)):n.a.createElement("div",null,n.a.createElement("p",{style:{height:"75px",position:"flex",textAlign:"center",borderRadius:"8px",border:"dashed"}},n.a.createElement(Be.a,null),n.a.createElement("p",null,"Click or drag to add files!"))))},Ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={sideDrawerOpen:!0,layers:[],selectedIndex:null,file:null,deletedLayers:[],deletedLayer:null,hide:null,unhide:null,zoomTo:[],createLayerMode:!1,clickedPoints:[]},a.drawerToggleClickHandler=function(){a.setState((function(e){return{sideDrawerOpen:!e.sideDrawerOpen}}))},a.toggleCreateMode=function(e){0==e||"quit"==e?a.setState({createLayerMode:e,clickedPoints:[]}):"reset"==e?a.setState({clickedPoints:[]}):a.setState({createLayerMode:e})},a.openGeoProcess=function(){},a.backdropClickHandler=function(){a.setState({sideDrawerOpen:!1})},a.handleNewFile=function(e){a.setState({file:e})},a.handleListItemClick=function(e,t){a.setState({selectedIndex:t,zoomTo:[a.state.layers[t]]})},a.handleDelete=function(e){try{var t=a.state.layers.filter((function(t){return t.layer._leaflet_id==e}))[0];a.state.deletedLayers.push(t),a.setState({deletedLayer:t.layer,layers:a.state.layers.filter((function(t){return t.layer._leaflet_id!==e}))})}catch(r){alert("could not remove the layer")}},a.addLayer=function(e){var t=a.state.layers.find((function(t){return t.layer._leaflet_id==e.layer._leaflet_id}));e.layer._layers&&!e.layer._svgSize&&void 0==t&&(a.setState({layers:[].concat(Object(i.a)(a.state.layers),[e])}),e.key=e.layer._leaflet_id)},a.clickCreateLayer=function(e){0!=a.state.createLayerMode&&a.setState({clickedPoints:[].concat(Object(i.a)(a.state.clickedPoints),[[e.latlng.lat,e.latlng.lng]])})},a.resetHighlight=function(e){e.target.setStyle({weight:1,dashArray:"",fillOpacity:.4})},a.zoomToLayer=function(e){a.setState({zoomTo:e})},a.resetZoom=function(){a.setState({zoomTo:[]})},a.toggleVisibility=function(e){e.visibility?a.setState({hide:e}):a.setState({unhide:e}),e.visibility=!e.visibility},a.resetFile=function(){a.setState({file:null,deletedLayer:null,hide:null,unhide:null})},a.highlightFeature=function(e){e.target.setStyle({weight:2,dashArray:"",fillOpacity:.6})},a.selectLayer=function(e){},a.orderLayers=a.orderLayers.bind(Object(y.a)(a)),a.addLayer=a.addLayer.bind(Object(y.a)(a)),a.handleNewFile=a.handleNewFile.bind(Object(y.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"orderLayers",value:function(e){this.setState({layers:e});for(var t=0;t<this.state.layers.length;t++);}},{key:"render",value:function(){return this.state.sideDrawerOpen&&n.a.createElement(_e,{click:this.backdropClickHandler}),n.a.createElement("div",{style:{height:"100%",width:"100%"}},n.a.createElement("div",{style:{height:"100vh - 46px",width:"19.5vw",position:"absolute",marginTop:"46px",marginLeft:"0.1vw"}},n.a.createElement(Ae,{handleNewFile:this.handleNewFile}),n.a.createElement(Ne,{handleListItemClick:this.handleListItemClick,selectedIndex:this.state.selectedIndex,layers:this.state.layers,orderLayers:this.orderLayers,onDelete:this.handleDelete,toggleVisibility:this.toggleVisibility,zoomTo:this.state.zoomTo})),n.a.createElement(pe,{drawerClickHandler:this.drawerToggleClickHandler,layers:this.state.layers,handleNewFile:this.handleNewFile,toggleCreateMode:this.toggleCreateMode,createLayerMode:this.state.createLayerMode}),n.a.createElement("main",{style:{marginLeft:"20vw",height:"100vh",width:"80vw",overflow:"auto",zIndex:"-1999"}},n.a.createElement(Re,{addLayer:this.addLayer,highlightFeature:this.highlightFeature,resetHighlight:this.resetHighlight,selectLayer:this.selectLayer,file:this.state.file,resetFile:this.resetFile,layers:this.state.layers,deletedLayers:this.state.deletedLayers,deletedLayer:this.state.deletedLayer,toggleVisibility:this.toggleVisibility,hide:this.state.hide,unhide:this.state.unhide,zoomTo:this.state.zoomTo,resetZoom:this.resetZoom,createLayerMode:this.state.createLayerMode,clickCreateLayer:this.clickCreateLayer,clickedPoints:this.state.clickedPoints})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[272,1,2]]]);
//# sourceMappingURL=main.e128f77d.chunk.js.map